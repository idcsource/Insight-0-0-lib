# Insight 0+0

CoderG the 2016 project, Insight 0+0 [ 洞悉 0+0 ]

![data-switch-between-roles](doc/logo.png)

*这是洞悉项目的依赖库*

*目前各包的功能完全不保证完整且无Bug，也就是说看看就行别真用。*

## 说明

Insight （洞悉 ） 是小说《[那曾经的旅程](http://hareading.com/books?bookId=1461))》（[小说繁体版链接见此](http://hareading.com/books?bookId=1461)）中起到至关重要作用的智能化系统，本项目只是把小说里的名字搬到了现实中来。

Insight 0+0并不是以实现小说中描述的强大智能为目的，只是尝试展现一个最基本的数据抓取、规整、检索、处理的模型。或者说只是本人的个人玩乐喜好而以，并不是一个严肃的项目。

## 目前

最近进行了drcm的首次测试，只是单一的角色存储测试。

drcm是Distributed Roles Control Machine的缩写，也就是分布式角色控制机。按照目前的设想，它算是整个Insight的核心底层功能，可以说还是很重要的。

为了应对drcm的所需，我不得不同时对nst进行了大的升级改造。nst，也就是Network Socket Transmission——网络套接字封装，它把go语言net包中的tcp常用功能进行了再次封装，包括服务器和客户端的创建，以及各种数据的发送、接受、转码等。

配合drcm对nst的改造，使nst的server-client沟通更加复杂。不再依赖“通讯桥”，默认使用长连接且含有心跳检测和断线重连，client支持连接池轮训分配以及锁。

drcm本身，实现的则是角色的分布式存储，提供类似普通数据库的主从（master-slaver）模式。但因为drcm保存的是“角色”，所以它并不是通用型的NoSQL数据库（虽然也可能有条件改造成通用的），毕竟“角色”不仅仅是为了记录数据，更重要的是记录比关系型数据库更复杂的角色间关系。而这种复杂的角色间关系则可以将每个角色变成数据节点参与大数据的运算。drcm之所以要分布式，显然也是为了大数据。

本次测试，使用了一台控制器（Operator）、一台主数据服务器（Master）、一台从数据服务器（Slave），控制器生成两个角色，并通过网络提交给Master保存。Master根据主从配置要求，将其中一个角色交给Slave保存。

下面的“Packages List”早已落后于实际，所以在本人改造前，下面的内容没有必要看。

## Packages List

### pubfunc

一套各个包中都会用到的基础函数。

### cpool

配置池。读取配置文件，并按要求提供具体的配置项。支持运行时配置文件重载。但目前并不支持配置项的运行时修改与保存。

### random

随机数与随机字符串生成。最重要目的是为角色生成40位字符串的非重复ID。

### roles

基本角色接口与基本角色类型。基本角色主要负责保存角色与它的父子、朋友关系。

### rolesio

角色存储接口与空存储类型。提供将角色关系以及角色信息保存进永久存储（如硬盘）的方式。

### hardstore

硬存储库，实现rolesio的部分功能，将角色和角色关系保存进永久存储。

### rcontrol

角色控制器。负责生成角色、设置角色关系、调用存储。

### bridges

数据交换桥。提供一个角色间数据传递的桥梁。交换桥为子进程运行，触发执行。

### rolesplus

增强角色类型。提供了实体嵌入其他角色（指针）的基本功能。并提供了使用数据交换桥的方法。

### nst

网络通信封装。提供TCP的server和client。

### smcs

状态监控与配置蔓延。节点与中心间的沟通方式。

### idb

一个连接PostgreSQL的方法，未来会支持更多数据库的连接。

### ilogs

简单的管理运行日志和错误日志。

### webs

一个无限级分类路由的HTTP服务器实现，从CoderG->Metropolis项目简化移植而来。

### spiders

蜘蛛抓取器。注意：这部分还未完成。
